{% extends "base.html" %}
{% block title %}Nova Despesa{% endblock %}
{% block content %}
<div class="d-flex align-items-center mb-3 gap-2">
  <a href="{{ url_for('financeiro.index') }}" class="btn btn-sm btn-outline-secondary"><i class="bi bi-arrow-left"></i></a>
  <h4 class="fw-bold mb-0">Registrar Despesa</h4>
</div>
<div class="card shadow-sm" style="max-width:500px">
  <div class="card-body">
    <form method="POST" onsubmit="return confirm('Deseja registrar esta despesa?')">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="mb-3"><label class="form-label">Data *</label>
        <input type="date" name="data" class="form-control" required></div>
      <div class="mb-3"><label class="form-label">Categoria *</label>
        <select name="categoria" class="form-select" required>
          {% for c in ["Insumos","Embalagens","Entregas","Marketing","Aluguel","Água","Luz","Outros"] %}
          <option>{{ c }}</option>{% endfor %}
        </select></div>
      <div class="mb-3"><label class="form-label">Descrição *</label>
        <input type="text" name="descricao" class="form-control" required></div>
      <div class="mb-3"><label class="form-label">Valor (R$) *</label>
        <input type="number" step="0.01" name="valor" class="form-control" required></div>
      <div class="mb-3"><label class="form-label">Forma de Pagamento *</label>
        <select name="forma_pagamento" class="form-select" required>
          {% for f in ["PIX","Dinheiro","Cartão","Boleto","Transferência"] %}
          <option>{{ f }}</option>{% endfor %}
        </select></div>
      <div class="form-check mb-3">
        <input type="checkbox" name="recorrente" id="rec" class="form-check-input">
        <label for="rec" class="form-check-label">Despesa Recorrente</label></div>
      <div class="mb-3"><label class="form-label">Observações</label>
        <textarea name="observacoes" class="form-control" rows="2"></textarea></div>
      <button type="submit" class="btn btn-danger">Registrar Despesa</button>
    </form>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>document.querySelector('input[name="data"]').value = new Date().toISOString().split('T')[0];</script>
{% endblock %}
